<h1><%= Run::CHARACTER_NAME_MAPPING[@character] || "All" %> Relics Statistics</h1>

<div class="mb-4">
  <%= link_to "&laquo; Back to Statistics", statistics_path, class: "btn btn-secondary" %>
</div>

<div class="card mb-4">
  <div class="card-body">
    <h2>Relic Acquisition Rates</h2>
    <p>This table shows how often relics are acquired when they are offered.</p>

    <table class="table">
      <thead>
        <tr>
          <th>Relic</th>
          <th>Times Acquired</th>
          <th>Times Rejected</th>
          <th>Acquisition Rate</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        <% @relic_stats.sort_by { |stat| -stat[:acquisition_rate] }.each do |stat| %>
          <tr>
            <td><%= stat[:name] %></td>
            <td><%= stat[:times_acquired] %></td>
            <td><%= stat[:times_rejected] %></td>
            <td><%= stat[:acquisition_rate] %>%</td>
            <td><%= link_to "Details", relic_statistics_path(id: stat[:id]), class: "btn btn-sm btn-primary" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <h2>Relic Database</h2>
    <p>All relics available for <%= Run::CHARACTER_NAME_MAPPING[@character] || "all characters" %></p>

    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Rarity</th>
          <th>Description</th>
          <th>Flavor Text</th>
        </tr>
      </thead>
      <tbody>
        <% @relics.each do |relic| %>
          <tr>
            <td><%= link_to relic.name, relic_statistics_path(id: relic.id) %></td>
            <td><%= relic.rarity %></td>
            <td><%= relic.description %></td>
            <td><%= relic.flavor_text %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
